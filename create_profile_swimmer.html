<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900'
    rel='stylesheet' type='text/css'>
    <link href="style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="create_profile.css" rel="stylesheet" type="text/css" media="all" />
    <title>Создать пловца</title>
    </head>
  <body>
    <img src = "icons/swimming.png" class = "swimmer">
    <header>
      <div class="container">
        <nav class="top-menu">
          <div class="navbar-logo" href="">
              <img src="icons/логотип.png">
              <h1>Swimming Coach's Diary</h1>
          </div>
          <ul class="menu-main">
            <li><a href="index.html">Главная</a></li>
            <li><a href="create_diary.html">Создать журнал</a></li>
            <li><a href="create_profile_swimmer.html">Создать пловца</a></li>
            <li><a href="list_of_swimmers.html">Список пловцов</a></li>
          </ul>
        </nav>
      </div>
    </header>
        
    <div class="main">
      <div class="container">
        <a href="index.html"><img src = "icons/back_arrow.png" class="back_arrow"></a> 
          <div class="anketa"><H2>Создать пловца</H2>
            <div class="form_anketa">
              <form action="#" method="#" id="form1">
                <div>
                  <label>
                    Фамилия:
                    <INPUT name="family" placeholder="Введите фамилию" SIZE=30>
                  </label>
                </div>
                <div>
                  <label>
                    Имя:
                    <INPUT name="name" placeholder="Введите имя" SIZE=20></TD>
                  </label>
                </div>
                <div>
                  <label>
                    Отчество:
                    <INPUT name="patronymic" placeholder="Введите отчество" SIZE=30>
                  </label>
                </div>
                <div>
                  <label>
                    Год рождения:
                    <input name="year"type="number" min="1900" max="2099" step="1" value="2020" />
                  </label>
                </div>
                <div>
                  <label>
                    Пол:
                    <INPUT TYPE="radio" name="Sex" VALUE ="Man" checked>Мужчина
                      <INPUT TYPE="radio" name="Sex" VALUE ="Woman">Женщина
                    </label>
                </div>
                <div>
                  <label>
                    Телефон:
                    <INPUT name="phone" placeholder="Введите номер телефона" SIZE=20>
                  </label>
                </div>
                <div>
                  <label>
                    Город:
                    <INPUT name="city" placeholder="Введите город" SIZE=30>
                  </label>
                </div>
                <div>
                  <button type="submit">Отправить</button>
                  </div>
              </form>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        


      </div>
    </footer>

    <script>

            const form = document.getElementById('form1')

            const formFileds = form.elements;

            const submitBtn = form.querySelector('[type="submit"]');

            submitBtn.addEventListener('click',clearStorage);




            function clearStorage(){
            localStorage.clear();
            }

            function changeHandler()
            {
              if(this.type!=='checkbox'){
                console.log(this.name,this.value);
                localStorage.setItem(this.name,this.value);
              }else{
                console.log(this.name,this.checked);
                localStorage.setItem(this.name,this.checked);
              }
            }

            function checkStorage(){
              for(let i=0;i<formFileds.length;i++){
                if(formFileds[i].type!='submit'){
                  if(formFileds[i].type=='checkbox'){
                    formFileds[i].checked=localStorage.getItem(formFileds[i].name);
                  }else{
                    formFileds[i].value=localStorage.getItem(formFileds[i].name);
                  }
                }
              }
              attachEvents();
            }

            function attachEvents(){
              for(let i=0;i<formFileds.length;i++){
                formFileds[i].addEventListener('change',changeHandler);
              }
            }

            checkStorage();


             window.addEventListener('storage',()=>{
              console.log('storage has changed');
             })
             


    </script>

  </body>
</html>